{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Websites/https---github.com-James119-nderema-Timetable_Frontend/Components/DepartmentPage/departments.jsx"],"sourcesContent":["'use client';\r\nimport axios from \"axios\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { useRouter } from 'next/navigation';\r\n\r\n// Helper function to fetch departments\r\nconst fetchDepartments = async () => {\r\n  try {\r\n    const response = await axios.get(\"http://localhost:9921/departments\");\r\n    console.log(\"Fetched departments:\", response.data);\r\n    return Array.isArray(response.data) ? response.data : []; // Ensure it's always an array\r\n  } catch (error) {\r\n    console.error(\"Error fetching departments:\", error);\r\n    return [];\r\n  }\r\n};\r\n\r\nconst DepartmentsPage = () => {\r\n  const [departments, setDepartments] = useState([]);\r\n  const [filteredDepartments, setFilteredDepartments] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [activeCategory, setActiveCategory] = useState(\"All Departments\");\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const getDepartments = async () => {\r\n      const data = await fetchDepartments();\r\n      setDepartments(data);\r\n      setFilteredDepartments(data);\r\n      setLoading(false);\r\n    };\r\n    getDepartments();\r\n  }, []);\r\n\r\n  const handleCategoryClick = (category) => {\r\n    setActiveCategory(category);\r\n    if (category === \"All Departments\") {\r\n      setFilteredDepartments(departments);\r\n    } else {\r\n      const filtered = departments.filter((department) => department.departmentType === category);\r\n      setFilteredDepartments(filtered);\r\n    }\r\n  };\r\n\r\n  const handleDeleteDepartment = async (departmentId) => {\r\n    try {\r\n      await axios.delete(`http://localhost:9921/departments/${departmentId}`); // Corrected API URL\r\n      const updatedDepartments = departments.filter((department) => department.departmentId !== departmentId);\r\n      setDepartments(updatedDepartments);\r\n      setFilteredDepartments(updatedDepartments);\r\n    } catch (error) {\r\n      console.error(\"Error deleting department:\", error);\r\n    }\r\n  };\r\n\r\n  const handleEditDepartment = (departmentId) => {\r\n    router.push(`/departments/edit/${departmentId}`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <div className=\"mb-6 flex justify-between items-center\">\r\n        <div>\r\n          <h3 className=\"text-lg text-green-900 font-semibold\">Departments Management</h3>\r\n          <p className=\"text-sm text-gray-500\">Manage and monitor all available Departments</p>\r\n        </div>\r\n        <button\r\n          onClick={() => router.push('/departments/add')}\r\n          className=\"px-4 py-2 bg-indigo-600 text-white rounded-md text-sm font-medium hover:bg-indigo-700\">\r\n          Add New Department\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\r\n        <div className=\"p-4 border-b flex gap-4\">\r\n          {[\"All Departments\"].map((category) => (\r\n            <button\r\n              key={category}\r\n              className={`px-3 py-1 rounded-md text-sm font-medium ${\r\n                activeCategory === category ? \"bg-indigo-100 text-indigo-600\" : \"bg-gray-100 text-gray-600 hover:bg-gray-200\"\r\n              }`}\r\n              onClick={() => handleCategoryClick(category)}\r\n            >\r\n              {category}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {loading ? (\r\n          <div className=\"p-4 text-center text-gray-500\">Loading Departments...</div>\r\n        ) : (\r\n          <table className=\"min-w-full divide-y divide-gray-200\">\r\n            <thead className=\"bg-gray-50\">\r\n              <tr>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Department ID\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Department Name\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Faculty ID\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                  Actions\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"bg-white divide-y divide-gray-200\">\r\n              {Array.isArray(filteredDepartments) && filteredDepartments.length > 0 ? (\r\n                filteredDepartments.map((department) => (\r\n                  <tr key={department.departmentId}>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                      {department.departmentId}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                      {department.departmentName}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                      {department.facultyId}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                      <div className=\"flex gap-2\">\r\n                        <button\r\n                          className=\"text-indigo-600 hover:text-indigo-900\"\r\n                          onClick={() => handleEditDepartment(department.departmentId)}\r\n                        >\r\n                          Edit\r\n                        </button>\r\n                        <button\r\n                          className=\"text-red-600 hover:text-red-900\"\r\n                          onClick={() => handleDeleteDepartment(department.departmentId)}\r\n                        >\r\n                          Delete\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              ) : (\r\n                <tr>\r\n                  <td colSpan=\"5\" className=\"px-6 py-4 text-center text-gray-500\">\r\n                    No Departments found.\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DepartmentsPage;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 425, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}